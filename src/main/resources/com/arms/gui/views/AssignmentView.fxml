<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import org.controlsfx.control.GridView?>

<BorderPane xmlns="http://javafx.com/javafx/17.0.2" 
            xmlns:fx="http://javafx.com/fxml/1" 
            fx:controller="com.arms.gui.controllers.AssignmentController"
            stylesheets="@../css/dashboard.css">
    
    <top>
        <HBox styleClass="header" alignment="CENTER_LEFT" spacing="20">
            <padding><Insets top="10" right="20" bottom="10" left="20"/></padding>
            
            <Label text="Assignment Management" styleClass="header-title"/>
            
            <Region HBox.hgrow="ALWAYS"/>
            
            <HBox spacing="10" alignment="CENTER_RIGHT">
                <Label fx:id="welcomeLabel" styleClass="welcome-label"/>
                <Button text="Back to Dashboard" onAction="#handleLogout" 
                       styleClass="logout-button"/>
            </HBox>
        </HBox>
    </top>
    
    <center>
        <VBox spacing="20">
            <padding><Insets all="20"/></padding>
            
            <!-- Role-specific Sections -->
            <VBox fx:id="studentSection" spacing="10" styleClass="info-section">
                <Label text="Student Actions" styleClass="section-title"/>
                <Label text="You can view and submit assignments here" 
                      styleClass="info-label"/>
            </VBox>
            
            <VBox fx:id="teacherSection" spacing="10" styleClass="info-section">
                <Label text="Teacher Actions" styleClass="section-title"/>
                <Label text="Create, edit, and grade assignments" 
                      styleClass="info-label"/>
            </VBox>
            
            <!-- Filter Controls -->
            <GridPane hgap="10" vgap="10">
                <padding><Insets bottom="10"/></padding>
                
                <Label text="Search:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                <TextField fx:id="searchField" promptText="Search assignments..." 
                          GridPane.rowIndex="0" GridPane.columnIndex="1" 
                          GridPane.columnSpan="2"/>
                
                <Label text="Course:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                <ComboBox fx:id="courseFilter" promptText="All Courses" 
                         GridPane.rowIndex="1" GridPane.columnIndex="1" 
                         prefWidth="200"/>
                
                <Label text="Type:" GridPane.rowIndex="1" GridPane.columnIndex="2"/>
                <ComboBox fx:id="typeFilter" GridPane.rowIndex="1" 
                         GridPane.columnIndex="3" prefWidth="120"/>
                
                <Label text="Status:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                <ComboBox fx:id="statusFilter" GridPane.rowIndex="2" 
                         GridPane.columnIndex="1" prefWidth="120"/>
                
                <Label text="Date Range:" GridPane.rowIndex="2" GridPane.columnIndex="2"/>
                <HBox spacing="5" GridPane.rowIndex="2" GridPane.columnIndex="3">
                    <DatePicker fx:id="fromDatePicker" promptText="From"/>
                    <Label text="to"/>
                    <DatePicker fx:id="toDatePicker" promptText="To"/>
                </HBox>
                
                <HBox spacing="10" GridPane.rowIndex="3" GridPane.columnIndex="0" 
                      GridPane.columnSpan="4">
                    <Button text="Clear Filters" onAction="#handleClearFilters" 
                           styleClass="action-button"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Button text="Refresh" onAction="#handleRefresh" 
                           styleClass="action-button"/>
                </HBox>
            </GridPane>
            
            <!-- Action Buttons -->
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Button fx:id="addAssignmentButton" text="Add Assignment" 
                       onAction="#handleAddAssignment" styleClass="primary-button"/>
                <Button fx:id="editAssignmentButton" text="Edit Assignment" 
                       onAction="#handleEditAssignment" styleClass="action-button"/>
                <Button fx:id="deleteAssignmentButton" text="Delete Assignment" 
                       onAction="#handleDeleteAssignment" styleClass="action-button"/>
                <Button fx:id="gradeButton" text="Grade Submissions" 
                       onAction="#handleGradeAssignment" styleClass="action-button"/>
                <Button fx:id="submitButton" text="Submit Assignment" 
                       onAction="#handleSubmitAssignment" styleClass="action-button"/>
            </HBox>
            
            <!-- Assignments Grid -->
            <VBox spacing="10">
                <Label text="Assignments" styleClass="section-title"/>
                <Label text="(Double-click to view details)" styleClass="hint-label"/>
                
                <GridView fx:id="assignmentsGrid" cellWidth="280" cellHeight="160"/>
            </VBox>
            
            <!-- Status Bar -->
            <HBox spacing="10" alignment="CENTER">
                <Label text="Total Assignments:" styleClass="status-label"/>
                <Label fx:id="assignmentCountLabel" text="0" styleClass="status-value"/>
            </HBox>
        </VBox>
    </center>
</BorderPane>
